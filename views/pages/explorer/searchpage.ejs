<%- include('../../partials/head') %>

<div class="container mt-5">
  <div class="row">
    <div class="col-md-8 offset-md-2">

      <h5>Search Result for - <%= searchTerm %></h5>

      <% if (posts.length === 0) { %>
        <p class="text-center text-muted">Nothing Found</p>
      <% } else { %>
        <% for( let post of posts ) { %>
          <div class="card card-body">
            <a href="/explorer/<%= post._id %>" class="text-dark text-decoration-none">
              <h5 class="font-weight-bold"><%= post.title %> </h5>
              <p><%= truncate(post.body) %> </p>
            </a>
          </div>
        <% } %>
      <% } %>

      
      <% if (totalPage > 1) { %>
      <nav class="mt-5">
        <ul class="pagination justify-content-center">
          <li class="page-item <%= currentPage === 1 ? 'disabled' : '' %>">
            <a
              class="page-link"
              href="<%= `/search?term=${searchTerm}&page=${currentPage - 1}` %>"
              >Previous</a
            >
          </li>

          <% for( let i = 1; i <= totalPage; i++ ) { %>
          <li class="page-item <%= currentPage === i ? 'active' : '' %>">
            <a
              class="page-link"
              href="<%= `/search?term=${searchTerm}&page=${i}` %> "
              ><%= i %>
            </a>
          </li>
          <% } %>

          <li
            class="page-item <%= currentPage === totalPage ? 'disabled' : '' %>"
          >
            <a
              class="page-link"
              href="<%= `/search?term=${searchTerm}&page=${currentPage + 1}` %> "
              >Next</a
            >
          </li>
        </ul>
      </nav>
      <% } %>
    </div>
  </div>
</div>

<%- include('../../partials/footer') %>
<script src="/scripts/bookmarks.js"></script>

</body>
</html>
